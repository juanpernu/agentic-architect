# UX Polish Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Add subtle CSS animations, unify spacing, fix chart axes, add project addresses/avatars, and implement color tags for projects across the app.

**Architecture:** CSS-only animations via `globals.css` keyframes. Project color tags require a DB migration, shared type update, API changes, form UI, and visual indicators in cards/tables. All changes are modifications to existing files except the migration.

**Tech Stack:** Tailwind CSS 4, Recharts, shadcn/ui (Avatar, Badge), Supabase (PostgreSQL migration), Next.js 16 App Router

---

### Task 1: CSS Animation System

**Files:**
- Modify: `apps/web/app/globals.css:119-126`

**Step 1: Add animation keyframes and utility classes**

Add the following at the end of `globals.css`, after the existing `@layer base` block:

```css
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 200ms ease-out both;
}

.animate-slide-up {
  animation: slide-up 300ms ease-out both;
}

.stagger-children > * {
  animation: slide-up 300ms ease-out both;
}

.stagger-children > *:nth-child(1) { animation-delay: 0ms; }
.stagger-children > *:nth-child(2) { animation-delay: 50ms; }
.stagger-children > *:nth-child(3) { animation-delay: 100ms; }
.stagger-children > *:nth-child(4) { animation-delay: 150ms; }
.stagger-children > *:nth-child(5) { animation-delay: 200ms; }
.stagger-children > *:nth-child(6) { animation-delay: 250ms; }
.stagger-children > *:nth-child(7) { animation-delay: 300ms; }
.stagger-children > *:nth-child(8) { animation-delay: 350ms; }
.stagger-children > *:nth-child(9) { animation-delay: 400ms; }
.stagger-children > *:nth-child(10) { animation-delay: 450ms; }
```

**Step 2: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 3: Commit**

```bash
git add apps/web/app/globals.css
git commit -m "feat: add CSS animation system (fade-in, slide-up, stagger)"
```

---

### Task 2: Apply Animations & Unify Spacing — Dashboard

**Files:**
- Modify: `apps/web/app/(dashboard)/page.tsx`

**Step 1: Add animations to dashboard sections**

In `apps/web/app/(dashboard)/page.tsx`, wrap the main content `<div>` with `animate-slide-up` and add `stagger-children` to the KPI grid and charts grid:

Change the return of `DashboardPage` from:
```tsx
return (
    <>
      <PageHeader
        title="Dashboard"
        description="Resumen de tus proyectos"
      />

      <div className="space-y-6">
```

To:
```tsx
return (
    <div className="p-6">
      <PageHeader
        title="Dashboard"
        description="Resumen de tus proyectos"
      />

      <div className="space-y-6 animate-slide-up">
```

Change the KPI grid fallback from:
```tsx
<div className="grid gap-4 grid-cols-2 lg:grid-cols-4">
```

To:
```tsx
<div className="grid gap-4 grid-cols-2 lg:grid-cols-4 stagger-children">
```

Change the charts grid from:
```tsx
<div className="grid gap-6 md:grid-cols-2">
```

To:
```tsx
<div className="grid gap-4 md:grid-cols-2 stagger-children">
```

Close the outer `<div>` properly (replace the closing `</>` with `</div>`).

**Step 2: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 3: Commit**

```bash
git add apps/web/app/\(dashboard\)/page.tsx
git commit -m "feat: add animations and unified spacing to dashboard"
```

---

### Task 3: Fix Recharts Axis Clipping

**Files:**
- Modify: `apps/web/components/dashboard/spend-by-project-chart.tsx`
- Modify: `apps/web/components/dashboard/spend-trend-chart.tsx`
- Modify: `apps/web/lib/format.ts`

**Step 1: Add compact currency formatter to format.ts**

Add this function at the end of `apps/web/lib/format.ts`:

```typescript
export function formatCurrencyCompact(amount: number): string {
  if (amount >= 1_000_000) return `$${(amount / 1_000_000).toFixed(1)}M`;
  if (amount >= 1_000) return `$${(amount / 1_000).toFixed(0)}K`;
  return `$${amount.toFixed(0)}`;
}
```

**Step 2: Update spend-by-project-chart.tsx**

In `apps/web/components/dashboard/spend-by-project-chart.tsx`:

1. Add import for `formatCurrencyCompact`:
```typescript
import { formatCurrency, formatCurrencyCompact } from '@/lib/format';
```

2. Replace the `currencyTickFormatter`:
```typescript
const currencyTickFormatter = (value: number) => formatCurrencyCompact(value);
```

3. Add margin and width to the chart. Change:
```tsx
<BarChart data={data}>
```
To:
```tsx
<BarChart data={data} margin={{ left: 12, right: 12, top: 8, bottom: 4 }}>
```

4. Add width to YAxis. Change:
```tsx
<YAxis
  className="text-xs"
  tick={{ fill: 'hsl(var(--muted-foreground))' }}
  tickFormatter={currencyTickFormatter}
/>
```
To:
```tsx
<YAxis
  className="text-xs"
  width={60}
  tick={{ fill: 'hsl(var(--muted-foreground))' }}
  tickFormatter={currencyTickFormatter}
/>
```

**Step 3: Update spend-trend-chart.tsx**

In `apps/web/components/dashboard/spend-trend-chart.tsx`:

1. Add import for `formatCurrencyCompact`:
```typescript
import { formatCurrency, formatCurrencyCompact } from '@/lib/format';
```

2. Replace the `currencyTickFormatter`:
```typescript
const currencyTickFormatter = (value: number) => formatCurrencyCompact(value);
```

3. Add margin to chart. Change:
```tsx
<LineChart data={chartData}>
```
To:
```tsx
<LineChart data={chartData} margin={{ left: 12, right: 12, top: 8, bottom: 4 }}>
```

4. Add width to YAxis. Change:
```tsx
<YAxis
  className="text-xs"
  tick={{ fill: 'hsl(var(--muted-foreground))' }}
  tickFormatter={currencyTickFormatter}
/>
```
To:
```tsx
<YAxis
  className="text-xs"
  width={60}
  tick={{ fill: 'hsl(var(--muted-foreground))' }}
  tickFormatter={currencyTickFormatter}
/>
```

**Step 4: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 5: Commit**

```bash
git add apps/web/lib/format.ts apps/web/components/dashboard/spend-by-project-chart.tsx apps/web/components/dashboard/spend-trend-chart.tsx
git commit -m "fix: chart axis clipping with compact currency formatter and margins"
```

---

### Task 4: Apply Animations & Unify Spacing — Projects Page

**Files:**
- Modify: `apps/web/app/(dashboard)/projects/page.tsx`

**Step 1: Add animations, address display, and consistent spacing**

1. Add `MapPin` to the lucide import. Change:
```tsx
import { Building2, Plus, Search } from 'lucide-react';
```
To:
```tsx
import { Building2, MapPin, Plus, Search } from 'lucide-react';
```

2. Add `animate-slide-up` to the main wrapper. The main `<div>` already has `className="p-6"` — good, no spacing change needed.

3. Add `stagger-children` to the project grid. Change:
```tsx
<div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
```
To:
```tsx
<div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3 stagger-children">
```

4. Add address to each project card. After the `<div>` containing the title and status badge, and before `<CardContent>`, add address display. Change the `<CardContent>` from:
```tsx
<CardContent className="space-y-2">
  <div className="text-sm text-muted-foreground">
    <span className="font-medium">Arquitecto:</span>{' '}
    {project.architect?.full_name ?? 'Sin asignar'}
  </div>
```
To:
```tsx
<CardContent className="space-y-2">
  {project.address && (
    <div className="flex items-center gap-1 text-sm text-muted-foreground">
      <MapPin className="h-3 w-3 shrink-0" />
      <span className="truncate">{project.address}</span>
    </div>
  )}
  <div className="text-sm text-muted-foreground">
    <span className="font-medium">Arquitecto:</span>{' '}
    {project.architect?.full_name ?? 'Sin asignar'}
  </div>
```

**Step 2: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 3: Commit**

```bash
git add apps/web/app/\(dashboard\)/projects/page.tsx
git commit -m "feat: add address and stagger animation to project cards"
```

---

### Task 5: Project Detail — Architect Avatar

**Files:**
- Modify: `apps/web/app/(dashboard)/projects/[id]/page.tsx`
- Modify: `apps/web/lib/api-types.ts`

**Step 1: Add avatar_url to ProjectDetail type**

In `apps/web/lib/api-types.ts`, change the `ProjectDetail` interface:

```typescript
export interface ProjectDetail extends Project {
  architect: {
    id: string;
    full_name: string;
    email: string;
    avatar_url: string | null;
  } | null;
}
```

**Step 2: Update the API to include avatar_url**

In `apps/web/app/api/projects/[id]/route.ts`, change the GET select query from:
```typescript
.select('*, architect:users!architect_id(id, full_name, email)')
```
To:
```typescript
.select('*, architect:users!architect_id(id, full_name, email, avatar_url)')
```

**Step 3: Update the project detail page**

In `apps/web/app/(dashboard)/projects/[id]/page.tsx`:

1. Replace `User` import with Avatar imports. Change:
```tsx
import { Building2, Edit, Trash2, Upload, User } from 'lucide-react';
```
To:
```tsx
import { Building2, Edit, Trash2, Upload } from 'lucide-react';
```

2. Add Avatar imports after the existing imports:
```tsx
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
```

3. Add `animate-slide-up` to the main wrapper. Change:
```tsx
<div className="p-6">
```
To (first occurrence, after loading/error checks, line ~122):
```tsx
<div className="p-6 animate-slide-up">
```

4. Add `stagger-children` to the info cards grid. Change:
```tsx
<div className="grid gap-4 md:grid-cols-3 mb-6">
```
To:
```tsx
<div className="grid gap-4 md:grid-cols-3 mb-6 stagger-children">
```

5. Replace the architect card content. Change the architect `<Card>` (the second card) from:
```tsx
<Card>
  <CardHeader>
    <CardTitle className="text-sm font-medium text-muted-foreground">
      <User className="inline mr-2 h-4 w-4" />
      Arquitecto
    </CardTitle>
  </CardHeader>
  <CardContent>
    <div className="text-base font-medium">
      {project.architect?.full_name ?? 'Sin asignar'}
    </div>
    {project.architect?.email && (
      <div className="text-xs text-muted-foreground mt-1">
        {project.architect.email}
      </div>
    )}
  </CardContent>
</Card>
```

To:
```tsx
<Card>
  <CardHeader>
    <CardTitle className="text-sm font-medium text-muted-foreground">
      Arquitecto
    </CardTitle>
  </CardHeader>
  <CardContent>
    {project.architect ? (
      <div className="flex items-center gap-3">
        <Avatar className="h-9 w-9">
          <AvatarImage src={project.architect.avatar_url ?? undefined} alt={project.architect.full_name} />
          <AvatarFallback className="text-xs">
            {project.architect.full_name
              .split(' ')
              .map((n) => n[0])
              .join('')
              .toUpperCase()
              .slice(0, 2)}
          </AvatarFallback>
        </Avatar>
        <div>
          <div className="text-base font-medium">{project.architect.full_name}</div>
          <div className="text-xs text-muted-foreground">{project.architect.email}</div>
        </div>
      </div>
    ) : (
      <div className="text-base font-medium text-muted-foreground">Sin asignar</div>
    )}
  </CardContent>
</Card>
```

**Step 4: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 5: Commit**

```bash
git add apps/web/lib/api-types.ts apps/web/app/api/projects/\[id\]/route.ts apps/web/app/\(dashboard\)/projects/\[id\]/page.tsx
git commit -m "feat: show architect avatar on project detail page"
```

---

### Task 6: Project Color Tags — DB Migration & Types

**Files:**
- Create: `packages/db/migrations/004_project_color.sql`
- Modify: `packages/shared/src/types.ts`

**Step 1: Create DB migration**

Create `packages/db/migrations/004_project_color.sql`:

```sql
-- Add color tag to projects for visual identification
ALTER TABLE projects ADD COLUMN color TEXT DEFAULT NULL;
```

**Step 2: Add ProjectColor type and update Project interface**

In `packages/shared/src/types.ts`:

1. Add type after the imports:
```typescript
export type ProjectColor = 'red' | 'blue' | 'green' | 'yellow' | 'purple' | 'orange' | 'pink' | 'teal';
```

2. Add `color` to the `Project` interface. Change:
```typescript
export interface Project {
  id: string;
  organization_id: string;
  name: string;
  address: string | null;
  status: ProjectStatus;
  architect_id: string | null;
  created_at: string;
  updated_at: string;
}
```
To:
```typescript
export interface Project {
  id: string;
  organization_id: string;
  name: string;
  address: string | null;
  status: ProjectStatus;
  architect_id: string | null;
  color: ProjectColor | null;
  created_at: string;
  updated_at: string;
}
```

3. Add `color` to `CreateProjectInput`. Change:
```typescript
export interface CreateProjectInput {
  name: string;
  address?: string;
  status?: ProjectStatus;
  architect_id?: string;
}
```
To:
```typescript
export interface CreateProjectInput {
  name: string;
  address?: string;
  status?: ProjectStatus;
  architect_id?: string;
  color?: ProjectColor;
}
```

4. Add `color` to `UpdateProjectInput`. Change:
```typescript
export interface UpdateProjectInput {
  name?: string;
  address?: string;
  status?: ProjectStatus;
  architect_id?: string;
}
```
To:
```typescript
export interface UpdateProjectInput {
  name?: string;
  address?: string;
  status?: ProjectStatus;
  architect_id?: string;
  color?: ProjectColor;
}
```

**Step 3: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 4: Commit**

```bash
git add packages/db/migrations/004_project_color.sql packages/shared/src/types.ts
git commit -m "feat: add color field to projects (migration + types)"
```

---

### Task 7: Project Color Tags — API Support

**Files:**
- Modify: `apps/web/app/api/projects/route.ts`
- Modify: `apps/web/app/api/projects/[id]/route.ts`

**Step 1: Update POST to accept color**

In `apps/web/app/api/projects/route.ts`, change the insert in POST from:
```typescript
const { data, error } = await db
    .from('projects')
    .insert({
      organization_id: ctx.orgId,
      name: body.name,
      address: body.address ?? null,
      status: body.status ?? 'active',
      architect_id: body.architect_id ?? null,
    })
```
To:
```typescript
const { data, error } = await db
    .from('projects')
    .insert({
      organization_id: ctx.orgId,
      name: body.name,
      address: body.address ?? null,
      status: body.status ?? 'active',
      architect_id: body.architect_id ?? null,
      color: body.color ?? null,
    })
```

**Step 2: Update PATCH to accept color**

In `apps/web/app/api/projects/[id]/route.ts`, add color to the update fields. After:
```typescript
if (body.architect_id !== undefined) updateFields.architect_id = body.architect_id;
```
Add:
```typescript
if (body.color !== undefined) updateFields.color = body.color;
```

**Step 3: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 4: Commit**

```bash
git add apps/web/app/api/projects/route.ts apps/web/app/api/projects/\[id\]/route.ts
git commit -m "feat: API support for project color field"
```

---

### Task 8: Project Color Tags — Color Picker in Form

**Files:**
- Modify: `apps/web/components/project-form-dialog.tsx`

**Step 1: Add color picker UI to the project form**

In `apps/web/components/project-form-dialog.tsx`:

1. Update imports to include `ProjectColor`:
```typescript
import type { Project, CreateProjectInput, UpdateProjectInput, ProjectStatus, ProjectColor } from '@architech/shared';
```

2. Add `color` to the form state type and default. Change:
```typescript
const [formData, setFormData] = useState<{
    name: string;
    address: string;
    status: ProjectStatus;
    architect_id: string;
  }>({
    name: '',
    address: '',
    status: 'active',
    architect_id: '',
  });
```
To:
```typescript
const [formData, setFormData] = useState<{
    name: string;
    address: string;
    status: ProjectStatus;
    architect_id: string;
    color: ProjectColor | '';
  }>({
    name: '',
    address: '',
    status: 'active',
    architect_id: '',
    color: '',
  });
```

3. Update the useEffect that populates form on edit. Change:
```typescript
if (project) {
      setFormData({
        name: project.name,
        address: project.address ?? '',
        status: project.status,
        architect_id: project.architect_id ?? '',
      });
    } else {
      setFormData({
        name: '',
        address: '',
        status: 'active',
        architect_id: '',
      });
    }
```
To:
```typescript
if (project) {
      setFormData({
        name: project.name,
        address: project.address ?? '',
        status: project.status,
        architect_id: project.architect_id ?? '',
        color: project.color ?? '',
      });
    } else {
      setFormData({
        name: '',
        address: '',
        status: 'active',
        architect_id: '',
        color: '',
      });
    }
```

4. Update the payload in handleSubmit. Change:
```typescript
const payload: CreateProjectInput | UpdateProjectInput = {
        name: formData.name,
        address: formData.address || undefined,
        status: formData.status,
        architect_id: formData.architect_id || undefined,
      };
```
To:
```typescript
const payload: CreateProjectInput | UpdateProjectInput = {
        name: formData.name,
        address: formData.address || undefined,
        status: formData.status,
        architect_id: formData.architect_id || undefined,
        color: formData.color || undefined,
      };
```

5. Add the color picker UI after the architect select field (before `<DialogFooter>`). Add:
```tsx
          <div className="space-y-2">
            <Label>Color (opcional)</Label>
            <div className="flex gap-2 flex-wrap">
              {(['red', 'blue', 'green', 'yellow', 'purple', 'orange', 'pink', 'teal'] as const).map(
                (c) => (
                  <button
                    key={c}
                    type="button"
                    onClick={() =>
                      setFormData({ ...formData, color: formData.color === c ? '' : c })
                    }
                    className={`h-8 w-8 rounded-full transition-all ${
                      formData.color === c
                        ? 'ring-2 ring-offset-2 ring-foreground scale-110'
                        : 'hover:scale-110'
                    }`}
                    style={{
                      backgroundColor: {
                        red: '#ef4444',
                        blue: '#3b82f6',
                        green: '#22c55e',
                        yellow: '#eab308',
                        purple: '#a855f7',
                        orange: '#f97316',
                        pink: '#ec4899',
                        teal: '#14b8a6',
                      }[c],
                    }}
                    aria-label={`Color ${c}`}
                  />
                )
              )}
            </div>
          </div>
```

**Step 2: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 3: Commit**

```bash
git add apps/web/components/project-form-dialog.tsx
git commit -m "feat: add color picker to project form dialog"
```

---

### Task 9: Project Color Dot — Project Cards & Detail

**Files:**
- Modify: `apps/web/app/(dashboard)/projects/page.tsx`
- Modify: `apps/web/app/(dashboard)/projects/[id]/page.tsx`

**Step 1: Add color dot helper**

Both files will need the same color-to-CSS mapping. Create an inline helper. In `apps/web/app/(dashboard)/projects/page.tsx`, add before the component:

```typescript
const PROJECT_COLORS: Record<string, string> = {
  red: '#ef4444',
  blue: '#3b82f6',
  green: '#22c55e',
  yellow: '#eab308',
  purple: '#a855f7',
  orange: '#f97316',
  pink: '#ec4899',
  teal: '#14b8a6',
};
```

**Step 2: Add color dot to project cards**

In the project card title area, change:
```tsx
<CardTitle className="text-lg">{project.name}</CardTitle>
```
To:
```tsx
<CardTitle className="text-lg flex items-center gap-2">
  {project.color && (
    <span
      className="inline-block h-2.5 w-2.5 rounded-full shrink-0"
      style={{ backgroundColor: PROJECT_COLORS[project.color] }}
    />
  )}
  {project.name}
</CardTitle>
```

**Step 3: Add color dot to project detail page header**

In `apps/web/app/(dashboard)/projects/[id]/page.tsx`, add the same `PROJECT_COLORS` constant before the component.

Then change the `PageHeader` title from:
```tsx
title={project.name}
```
To:
```tsx
title={
  <span className="flex items-center gap-2">
    {project.color && (
      <span
        className="inline-block h-3 w-3 rounded-full shrink-0"
        style={{ backgroundColor: PROJECT_COLORS[project.color] }}
      />
    )}
    {project.name}
  </span>
}
```

Note: Check if `PageHeader` accepts `ReactNode` for title. If it only accepts `string`, modify the title prop type in `apps/web/components/ui/page-header.tsx` from `title: string` to `title: React.ReactNode`.

**Step 4: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 5: Commit**

```bash
git add apps/web/app/\(dashboard\)/projects/page.tsx apps/web/app/\(dashboard\)/projects/\[id\]/page.tsx apps/web/components/ui/page-header.tsx
git commit -m "feat: show color dot on project cards and detail header"
```

---

### Task 10: Receipts Table — Colored Project Badge

**Files:**
- Modify: `apps/web/app/(dashboard)/receipts/page.tsx`
- Modify: `apps/web/lib/api-types.ts`

**Step 1: Update ReceiptWithDetails type to include project color**

In `apps/web/lib/api-types.ts`, change:
```typescript
export interface ReceiptWithDetails extends Receipt {
  project: {
    id: string;
    name: string;
  };
```
To:
```typescript
export interface ReceiptWithDetails extends Receipt {
  project: {
    id: string;
    name: string;
    color: string | null;
  };
```

**Step 2: Update the receipts API to include project color**

Check `apps/web/app/api/receipts/route.ts` — the Supabase select for receipts should include the project color. Find the `.select(...)` in the GET handler and add `color` to the project fields. Change the project selection from something like `project:projects(id, name)` to `project:projects(id, name, color)`.

**Step 3: Update the receipts page**

In `apps/web/app/(dashboard)/receipts/page.tsx`:

1. Add Badge import:
```tsx
import { Badge } from '@/components/ui/badge';
```

2. Add the color mapping constant before the component:
```typescript
const PROJECT_BADGE_STYLES: Record<string, { bg: string; text: string }> = {
  red: { bg: '#fef2f2', text: '#b91c1c' },
  blue: { bg: '#eff6ff', text: '#1d4ed8' },
  green: { bg: '#f0fdf4', text: '#15803d' },
  yellow: { bg: '#fefce8', text: '#a16207' },
  purple: { bg: '#faf5ff', text: '#7e22ce' },
  orange: { bg: '#fff7ed', text: '#c2410c' },
  pink: { bg: '#fdf2f8', text: '#be185d' },
  teal: { bg: '#f0fdfa', text: '#0f766e' },
};
```

3. Replace the project cell content. Change:
```tsx
<TableCell>
  <span
    className="text-primary hover:underline"
    onClick={(e) => {
      e.stopPropagation();
      router.push(`/projects/${receipt.project_id}`);
    }}
  >
    {receipt.project.name}
  </span>
</TableCell>
```
To:
```tsx
<TableCell>
  {receipt.project.color && PROJECT_BADGE_STYLES[receipt.project.color] ? (
    <Badge
      className="cursor-pointer hover:opacity-80 transition-opacity"
      style={{
        backgroundColor: PROJECT_BADGE_STYLES[receipt.project.color].bg,
        color: PROJECT_BADGE_STYLES[receipt.project.color].text,
        borderColor: 'transparent',
      }}
      onClick={(e) => {
        e.stopPropagation();
        router.push(`/projects/${receipt.project_id}`);
      }}
    >
      {receipt.project.name}
    </Badge>
  ) : (
    <span
      className="text-primary hover:underline cursor-pointer"
      onClick={(e) => {
        e.stopPropagation();
        router.push(`/projects/${receipt.project_id}`);
      }}
    >
      {receipt.project.name}
    </span>
  )}
</TableCell>
```

**Step 4: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 5: Commit**

```bash
git add apps/web/lib/api-types.ts apps/web/app/\(dashboard\)/receipts/page.tsx apps/web/app/api/receipts/route.ts
git commit -m "feat: colored project badges in receipts table"
```

---

### Task 11: Apply Animations — Receipts & Settings Pages

**Files:**
- Modify: `apps/web/app/(dashboard)/receipts/page.tsx`
- Modify: `apps/web/app/(dashboard)/settings/page.tsx`

**Step 1: Add animations to receipts page**

In `apps/web/app/(dashboard)/receipts/page.tsx`, the main wrapper `<div className="p-6">` — add `animate-slide-up` to it. No spacing changes needed as it already uses `p-6`.

**Step 2: Add animations to settings page**

In `apps/web/app/(dashboard)/settings/page.tsx`, add `animate-slide-up` to the main wrapper div.

**Step 3: Verify build passes**

Run: `cd /Users/juanpernu/Workspace/agentic-architect/.worktrees/ux-improvements && npx turbo build`
Expected: Build succeeds

**Step 4: Commit**

```bash
git add apps/web/app/\(dashboard\)/receipts/page.tsx apps/web/app/\(dashboard\)/settings/page.tsx
git commit -m "feat: add slide-up animation to receipts and settings pages"
```
